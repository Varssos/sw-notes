<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tutorial#2 &mdash; SW notes 0.1 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Tutorial#3" href="../tutorial3/tutorial3.html" />
    <link rel="prev" title="Tutorial#1, Introduction" href="../tutorial1/tutorial1.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> SW notes
          </a>
              <div class="version">
                0.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../notes.html">Notes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">C/C++</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../setup.html">Setup environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chrono.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cute_unit_tests.html">Cute</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../makefile.html">Makefile tips, knowledge in a nuthsell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../makefile_all.html">All Makefile knowledge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmake.html">Cmake</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../s2opc.html">S2OPC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modbusRTU.html">Modbus RTU</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modbusTCP.html">Modbus TCP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../s7_protocol.html">S7 Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../debug_configuration.html">Prepare debug configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../linux_serial_port.html">Linux serial port configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../good_practises_cr.html">Good practises and CR checklist</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../unittests.html">Unit tests libraries</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../google_tests.html">Google tests</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../google_tests.html#preview">Preview</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../google_tests.html#video-tutorial-analysis">Video Tutorial analysis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../google_tests.html#install-on-linux-system">Install on Linux system</a></li>
<li class="toctree-l4"><a class="reference internal" href="../google_tests.html#minimum-example-test-code">Minimum example test code</a></li>
<li class="toctree-l4"><a class="reference internal" href="../google_tests.html#cmake-for-minimum-test-code">CMake for minimum test code</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../inheritence.html">Inheritence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../build_errors.html">Build errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../debugging.html">Debugging and problems solving</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../thread.html">Multithreading in C++</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../bash/index.html">Bash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/index.html">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../network/index.html">Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../linux/index.html">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../openwrt/index.html">OpenWrt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../git/index.html">Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rpi/index.html">RPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../esp32/index.html">ESP32</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">SW notes</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../index.html">C/C++</a> &raquo;</li>
          <li><a href="../../unittests.html">Unit tests libraries</a> &raquo;</li>
          <li><a href="../google_tests.html">Google tests</a> &raquo;</li>
      <li>Tutorial#2</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/cpp/google_tests/tutorial2/tutorial2.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tutorial-2">
<h1>Tutorial#2<a class="headerlink" href="#tutorial-2" title="Permalink to this headline"></a></h1>
<p>It is possible to write more than one assertion statement in test cases. If one of them fail, all test will be failed. One test work till first fail. You should set one assertion per one test case</p>
<section id="test-consist-of-arrange-act-assert">
<h2>TEST consist of arrange, act, assert<a class="headerlink" href="#test-consist-of-arrange-act-assert" title="Permalink to this headline"></a></h2>
<img alt="Test consist of" src="../../../_images/test_consist_of.png" />
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtest/gtest.h&gt;</span><span class="cp"></span>

<span class="n">TEST</span><span class="p">(</span><span class="w"> </span><span class="n">TestName</span><span class="p">,</span><span class="w"> </span><span class="n">Subtest_1</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Arrange</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">increment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Act</span>
<span class="w">    </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">increment</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Assert</span>
<span class="w">    </span><span class="n">ASSERT_EQ</span><span class="p">(</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="mi">105</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="kt">int</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">testing</span><span class="o">::</span><span class="n">InitGoogleTest</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">RUN_ALL_TESTS</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="unit-tests-should">
<h2>Unit tests should:<a class="headerlink" href="#unit-tests-should" title="Permalink to this headline"></a></h2>
<ol class="arabic simple">
<li><p>Run extremely fast (within Milliseconds)</p></li>
<li><p>Must be able to run independently</p></li>
<li><p>Does not depend upon any external input</p></li>
</ol>
</section>
<section id="independet-2-unit-tests">
<h2>Independet 2 unit tests:<a class="headerlink" href="#independet-2-unit-tests" title="Permalink to this headline"></a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtest/gtest.h&gt;</span><span class="cp"></span>

<span class="n">TEST</span><span class="p">(</span><span class="w"> </span><span class="n">TestName</span><span class="p">,</span><span class="w"> </span><span class="n">increment_by_5</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Arrange</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">increment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Act</span>
<span class="w">    </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">increment</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Assert</span>
<span class="w">    </span><span class="n">ASSERT_EQ</span><span class="p">(</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="mi">105</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="n">TEST</span><span class="p">(</span><span class="w"> </span><span class="n">TestName</span><span class="p">,</span><span class="w"> </span><span class="n">increment_by_10</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Arrange</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">increment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Act</span>
<span class="w">    </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">increment</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Assert</span>
<span class="w">    </span><span class="n">ASSERT_EQ</span><span class="p">(</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="mi">110</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="kt">int</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">testing</span><span class="o">::</span><span class="n">InitGoogleTest</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">RUN_ALL_TESTS</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="string-comparing">
<h2>String comparing<a class="headerlink" href="#string-comparing" title="Permalink to this headline"></a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtest/gtest.h&gt;</span><span class="cp"></span>

<span class="k">class</span> <span class="nc">MyClass</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">id</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="k">public</span><span class="o">:</span><span class="w"></span>

<span class="w">    </span><span class="n">MyClass</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">_id</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">id</span><span class="p">(</span><span class="n">_id</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">GetId</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">id</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="n">TEST</span><span class="p">(</span><span class="w"> </span><span class="n">TestName</span><span class="p">,</span><span class="w"> </span><span class="n">increment_by_5</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Arrange</span>
<span class="w">    </span><span class="n">MyClass</span><span class="w"> </span><span class="nf">mc</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;root&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Act</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mc</span><span class="p">.</span><span class="n">GetId</span><span class="p">();</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Assert</span>
<span class="w">    </span><span class="n">ASSERT_EQ</span><span class="p">(</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;root&quot;</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>



<span class="kt">int</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">testing</span><span class="o">::</span><span class="n">InitGoogleTest</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">RUN_ALL_TESTS</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Even if string are equal it will fail. To compare use ASSERT_STREQ instead of ASSERT_EQ!!!!</strong>
Like here:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtest/gtest.h&gt;</span><span class="cp"></span>

<span class="k">class</span> <span class="nc">MyClass</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">id</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="k">public</span><span class="o">:</span><span class="w"></span>

<span class="w">    </span><span class="n">MyClass</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">_id</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">id</span><span class="p">(</span><span class="n">_id</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">GetId</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">id</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="n">TEST</span><span class="p">(</span><span class="w"> </span><span class="n">TestName</span><span class="p">,</span><span class="w"> </span><span class="n">increment_by_5</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Arrange</span>
<span class="w">    </span><span class="n">MyClass</span><span class="w"> </span><span class="nf">mc</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;root&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Act</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mc</span><span class="p">.</span><span class="n">GetId</span><span class="p">();</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Assert</span>
<span class="w">    </span><span class="n">ASSERT_STREQ</span><span class="p">(</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;root&quot;</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>



<span class="kt">int</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">testing</span><span class="o">::</span><span class="n">InitGoogleTest</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">RUN_ALL_TESTS</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<img alt="string asserts" src="../../../_images/string_asserts.png" />
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../tutorial1/tutorial1.html" class="btn btn-neutral float-left" title="Tutorial#1, Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../tutorial3/tutorial3.html" class="btn btn-neutral float-right" title="Tutorial#3" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, SW.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>